# =============================================================================
# WHISPER LOCAL WORKER ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env.local and update with your actual values
# The install.sh script will create .env.local automatically with detected paths
# =============================================================================

# -----------------------------------------------------------------------------
# Whisper.cpp Configuration
# -----------------------------------------------------------------------------

# Path to whisper.cpp main binary
# Auto-detected by install.sh, or set manually
WHISPER_PATH=./whisper.cpp/main

# Path to directory containing model files (ggml-*.bin)
# Auto-detected by install.sh, or set manually
MODELS_PATH=./whisper.cpp/models

# -----------------------------------------------------------------------------
# Worker Configuration
# -----------------------------------------------------------------------------

# Number of concurrent transcription jobs to process
# Recommended: 1-2 for Mac Mini M1/M2, 2-4 for M3
# Higher values may cause memory issues on machines with less RAM
WORKER_CONCURRENCY=2

# Directory for temporary file storage during processing
# Ensure sufficient disk space (500MB per concurrent job recommended)
TEMP_DIR=./temp

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------

# Redis connection URL for BullMQ job queue
# Format: redis://[username:password@]host[:port][/db-number]
# Examples:
#   Local: redis://localhost:6379
#   Remote: redis://user:pass@redis.example.com:6379/0
#   TLS: rediss://redis.example.com:6380
REDIS_URL=redis://localhost:6379

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------

# Log level for worker output
# Options: info, warn, error
# - info: All logs (recommended for development)
# - warn: Warnings and errors only
# - error: Errors only (recommended for production)
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# Whisper Processing Options (Optional)
# -----------------------------------------------------------------------------

# Language code for transcription
# Leave empty or comment out for automatic language detection
# Use ISO 639-1 codes: en, es, fr, de, it, pt, ru, ja, ko, zh, etc.
# Example: WHISPER_LANGUAGE=en
# WHISPER_LANGUAGE=

# Translate transcription to English
# Set to 'true' to translate non-English audio to English
# Default: false (transcribe in original language)
# WHISPER_TRANSLATE=false

# -----------------------------------------------------------------------------
# File Management
# -----------------------------------------------------------------------------

# Hours to retain audio files in S3 before automatic deletion
# Files are deleted after this period to save storage costs
# Recommended: 24 (1 day) or 168 (1 week)
FILE_RETENTION_HOURS=24

# -----------------------------------------------------------------------------
# Backend Integration (Required for Production)
# -----------------------------------------------------------------------------

# These are accessed from the backend modules
# Ensure the backend is configured with these values:

# DATABASE_URL - PostgreSQL connection (in backend/.env)
# S3_BUCKET - S3/R2 bucket name (in backend/.env)
# S3_ACCESS_KEY - S3/R2 access key (in backend/.env)
# S3_SECRET_KEY - S3/R2 secret key (in backend/.env)

# -----------------------------------------------------------------------------
# Performance Tuning (Advanced)
# -----------------------------------------------------------------------------

# Maximum time (ms) for a single transcription job
# Default: 30 minutes (1800000ms)
# Increase for very long audio files or slow models
# JOB_TIMEOUT=1800000

# Node.js memory limit (if needed for large files)
# Set via NODE_OPTIONS environment variable
# Example: NODE_OPTIONS=--max-old-space-size=4096
# NODE_OPTIONS=

# -----------------------------------------------------------------------------
# Monitoring & Debugging (Optional)
# -----------------------------------------------------------------------------

# Enable debug output from whisper.cpp
# WHISPER_DEBUG=false

# Enable performance metrics logging
# METRICS_ENABLED=false

# -----------------------------------------------------------------------------
# Notes
# -----------------------------------------------------------------------------

# 1. Paths can be absolute or relative to this directory
# 2. All paths should use forward slashes, even on Windows
# 3. Do not commit .env.local to version control
# 4. Restart worker after changing environment variables
# 5. Test configuration with: npm run validate

# =============================================================================
# END OF CONFIGURATION
# =============================================================================
