# WhisperAPI Deployment Configuration
# Copy this file to backend/.env and fill in the values

###############################################################################
# Database Configuration
###############################################################################
DATABASE_URL="postgresql://user:password@host:5432/whisperapi"

###############################################################################
# Redis Configuration
###############################################################################
REDIS_URL="redis://localhost:6379"
# With password: redis://:password@localhost:6379

###############################################################################
# S3 / Cloudflare R2 Storage Configuration
###############################################################################
S3_BUCKET="whisper-audio"
S3_REGION="us-east-1"
S3_ACCESS_KEY="your-access-key-here"
S3_SECRET_KEY="your-secret-key-here"

# Optional: For Cloudflare R2 or custom S3-compatible storage
S3_ENDPOINT="https://xxx.r2.cloudflarestorage.com"

###############################################################################
# Stripe Payment Configuration
###############################################################################
# Use test keys for development, live keys for production
STRIPE_SECRET_KEY="sk_test_xxx"  # Change to sk_live_xxx in production
STRIPE_WEBHOOK_SECRET="whsec_xxx"
STRIPE_PRICE_ID_PRO="price_xxx"

###############################################################################
# Worker Configuration
###############################################################################
# Worker mode: "local" for Mac Mini, "cloud" for Modal
WORKER_MODE="local"

# Local worker (Mac Mini) - Use Tailscale IP or Cloudflare Tunnel URL
LOCAL_WORKER_URL="http://100.x.x.x:3001"
# Or with Cloudflare: https://worker.yourdomain.com

# Cloud worker (Modal)
CLOUD_WORKER_URL="https://username--whisper-worker-process.modal.run"

###############################################################################
# API Configuration
###############################################################################
API_KEY_PREFIX="wtr_live_"
API_KEY_LENGTH=32
PORT=3000
NODE_ENV="development"  # development, production, staging, test

###############################################################################
# Rate Limits (requests per hour)
###############################################################################
RATE_LIMIT_FREE=3
RATE_LIMIT_PRO=20
RATE_LIMIT_PAYG=100

###############################################################################
# Monthly Quotas (minutes)
###############################################################################
QUOTA_FREE=60
QUOTA_PRO=600

###############################################################################
# File Upload Configuration
###############################################################################
MAX_FILE_SIZE_MB=500
ALLOWED_FORMATS="mp3,wav,m4a,mp4,mpeg,webm"

###############################################################################
# Cleanup Configuration
###############################################################################
FILE_RETENTION_HOURS=24

###############################################################################
# Optional: Backup Configuration
###############################################################################
# S3 bucket for database backups
# S3_BACKUP_BUCKET="whisper-backups"

###############################################################################
# Optional: Monitoring URLs (for health checks)
###############################################################################
# API_URL="http://localhost:3000"
# DASHBOARD_URL="http://localhost:3001"
# LANDING_URL="http://localhost:3002"
